<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Setting up a new bookdown project | NotSoTechnical</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://hrmJ.github.io/blog/posts/setting-up-a-new-bookdown-project/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Juho Härme">
<link rel="prev" href="../follow-up-more-on-xapers/" title="Follow-up: more on xapers" type="text/html">
<meta property="og:site_name" content="NotSoTechnical">
<meta property="og:title" content="Setting up a new bookdown project">
<meta property="og:url" content="https://hrmJ.github.io/blog/posts/setting-up-a-new-bookdown-project/">
<meta property="og:description" content="I've been excited about writing my research in
Rmarkdown for something like five years now,
and have written basically all my academic work with it. The biggest project
was my dissertation thesis, a m">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-11-06T09:41:26+02:00">
<meta property="article:tag" content="r rmarkdown bookdown">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="https://hrmJ.github.io/blog/">

            <span id="blog-title">NotSoTechnical</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item">
    <a href="index.md" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>
                </li>
<li class="nav-item">
<a href="../../pages/presentations" class="nav-link">Presentations</a>
                </li>
<li class="nav-item">
<a href="../../pages/courses" class="nav-link">Teaching</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Setting up a new bookdown project</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    Juho Härme
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2018-11-06T09:41:26+02:00" itemprop="datePublished" title="2018-11-06 09:41">2018-11-06 09:41</time></a>
            </p>
                <p class="commentline">
        
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/setting-up-a-new-bookdown-project.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="index.md" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>I've been excited about writing my research in
<a href="https://rmarkdown.rstudio.com/">Rmarkdown</a> for something like five years now,
and have written basically all my academic work with it. The biggest project
was my dissertation thesis, a monograph written entirely in Rmd.
When writing something that large, or, actually, anything you 
might want to split into different sections, you should definitely
check out a recent development in the Rmarkdown universe, namely, the <a href="https://bookdown.org/yihui/bookdown/">Bookdown</a>
package. In this post, I'll go through my basic setup 
of a new bookdown project.</p>
<h2>1. Setting up the project folder</h2>
<p>I start with a fresh new folder with the following structure:</p>
<pre class="code literal-block"><span></span>bookdown/
├── 01-intro.Rmd
├── aux
│   ├── preamble.tex
│   ├── refs.bib
│   └── utaltl.csl
├── _bookdown.yml
└── _output.yml
</pre>


<p>Bookdown will try to get all the rmd files in the project folder
and turn them into a single document. To make sure you have the right 
order of files in the final output, it's safest to prefix the files
with numbers. </p>
<p>The configuration of bookdown is done through the two <a href="https://en.wikipedia.org/wiki/YAML">yaml</a>
files, <code>_bookdown.yml</code> and'<code>_output.yml</code> AND with a yaml block
at the beginning of the first file of the project (in this case, <code>01-intro.Rmd</code>).</p>
<h3>Basic configuration</h3>
<p>In a project I recently started, this is what the yaml block 
in <code>01-intro.Rmd</code> looks like:</p>
<pre class="code literal-block"><span></span><span class="l l-Scalar l-Scalar-Plain">latexBackend</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">linguex</span>
<span class="l l-Scalar l-Scalar-Plain">exampleRefFormat</span><span class="p p-Indicator">:</span> <span class="s">'{}'</span>
<span class="l l-Scalar l-Scalar-Plain">title</span><span class="p p-Indicator">:</span> <span class="s">'Last</span><span class="nv"> </span><span class="s">year</span><span class="nv"> </span><span class="s">but</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">yesterday?</span><span class="nv"> </span><span class="s">Explaining</span><span class="nv"> </span><span class="s">differences</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">locations</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">Finnish</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">Russian</span><span class="nv"> </span><span class="s">time</span><span class="nv"> </span><span class="s">adverbials</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">comparable</span><span class="nv"> </span><span class="s">corpora'</span>
<span class="l l-Scalar l-Scalar-Plain">author</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Juho Härme</span>
<span class="l l-Scalar l-Scalar-Plain">bibliography</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aux/refs.bib</span>
<span class="l l-Scalar l-Scalar-Plain">link-citations</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre>


<p>The options <em>latexBackend</em> and <em>exampleRefFormat</em> are specific 
to my projects: they have to do with using linguistic examples
in the text, which I do with my own fork of a <a href="http://www.pandoc.org/filters.html">pandoc filter</a>
called <a href="https://github.com/hrmJ/pangloss_linguex">pangloss</a>. These
lines should be left out if such a filter is not used.</p>
<p>Bibliography management and different outputs, output modification using cls
or bib(la)tex and all those kinds of factors definitely deserve
a separate post. For simplicity's sake, here I only
use the default settings and simply define the location of the <code>.bib</code>
file containing my references in the format of a bibtex database.</p>
<p>The file <code>_bookdown.yaml</code> is pretty simple, in this
project I only have one line:</p>
<pre class="code literal-block"><span></span><span class="n">delete_merged_file</span><span class="o">:</span> <span class="kc">true</span>
</pre>


<h3>Output configuration</h3>
<p>When writing Rmarkdown files, you can specify multiple output
formats in <code>_output.yml</code> and if you compile your 
book with the <a href="https://bookdown.org/yihui/bookdown/new-session.html">render_book function</a>,
without additional arguments, all those output formats will be produced.</p>
<p>Here, I have specified two output formats, <em>html</em> and <em>pdf</em> (produced with
latex). The html is something I use when sketching and building the article / book.
At that stage I usually have the pdf parts commented out. When the work is getting
closer to be finished, I tend to switch to the pdf output.</p>
<p>Here's what my <code>_output.yml</code> looks like</p>
<pre class="code literal-block"><span></span>bookdown::gitbook:
bookdown::pdf_book:
  toc: true
  toc_depth: 6
  includes:
    in_header: aux/preamble.tex
  latex_engine: xelatex
  keep_tex: true
  pandoc_args:
    - --filter
    - pangloss
    - --filter
    - pandoc_avm
</pre>


<h3>Auxiliary files</h3>
<p>As can be seen in the folder structure above, I use a separate folder called <em>aux</em> to store
my auxiliary files in. These include the bibliography database, possibly some additional pandoc
filters, cls files and the like. One especially important file is the <code>preamble.tex</code>, which
loads all the needed latex packages and adjusts the final document's layout.</p>
<h2>Compiling the book</h2>
<p>I will probably write something about how to do this in Rstudio later on.
Here's how the compilation of the book happens in R terminal.</p>
<p>First, make sure to (install and) load the bookdown library</p>
<pre class="code literal-block"><span></span><span class="kn">library</span><span class="p">(</span>bookdown<span class="p">)</span>
</pre>


<p>Then, just run the <code>r render_book</code> function by specifying at least one file to be included
in the book:</p>
<pre class="code literal-block"><span></span>render_book<span class="p">(</span><span class="s">"01-intro.Rmd"</span><span class="p">)</span>
</pre>


<p>I actually tend to have a separate <code>.Rprofile</code> file
which includes all the libraries that need to be loaded
etc. Place the file in the project's directory and
you'll have you workspace set up the way you want it.</p>
<p>After the compilation, you'll see that
the final output will end up in a folder called <code>_book</code>
which also includes a whole bunch
of auxiliary files, especially for the gitbook type of html format.
Here's the structure of my bookdown folder
after the compilation process:</p>
<pre class="code literal-block"><span></span>bookdown/
├── 01-intro.Rmd
├── aux
│   ├── preamble.tex
│   ├── refs.bib
│   └── utaltl.csl
├── _book
│   ├── a-real-section.html
│   ├── introduction.html
│   ├── libs
│   │   ├── gitbook-2.6.7
│   │   │   ├── css
│   │   │   │   ├── fontawesome
│   │   │   │   │   └── fontawesome-webfont.ttf
│   │   │   │   ├── plugin-bookdown.css
│   │   │   │   ├── plugin-fontsettings.css
│   │   │   │   ├── plugin-highlight.css
│   │   │   │   ├── plugin-search.css
│   │   │   │   └── style.css
│   │   │   └── js
│   │   │       ├── app.min.js
│   │   │       ├── jquery.highlight.js
│   │   │       ├── lunr.js
│   │   │       ├── plugin-bookdown.js
│   │   │       ├── plugin-fontsettings.js
│   │   │       ├── plugin-search.js
│   │   │       └── plugin-sharing.js
│   │   └── jquery-2.2.3
│   │       └── jquery.min.js
│   ├── _main.pdf
│   ├── _main.tex
│   └── search_index.json
├── _bookdown.yml
└── _output.yml
</pre>


<p>The actual pdf output is the file <code>_book/_main.pdf</code>. For the html
output, just pick the  name of the first html file, in this case
<code>introduction.html</code>.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/r-rmarkdown-bookdown/" rel="tag">r rmarkdown bookdown</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../follow-up-more-on-xapers/" rel="prev" title="Follow-up: more on xapers">Previous post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="notsotechnical",
            disqus_url="https://hrmJ.github.io/blog/posts/setting-up-a-new-bookdown-project/",
        disqus_title="Setting up a new bookdown project",
        disqus_identifier="cache/posts/setting-up-a-new-bookdown-project.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="notsotechnical";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><!--End of body content--><footer id="footer">
            Contents © 2019         <a href="mailto:juho.harme@gmail.com">Juho Härme</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
